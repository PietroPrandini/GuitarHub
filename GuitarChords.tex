%	Next lines is for compiling with arara package

%	First compiling: useful for generating .sxd files of the index
%	arara: pdflatex

%	Generate .sbx files of the index
%	arara: songidx: {input: ./chiesa}
%	arara: songidx: {input: ./party}
%	arara: songidx: {input: ./christmas}

%	Last compiling with complete indexes
%	arara: pdflatex


\documentclass[openright]{book}
%	Preamble
\usepackage[a5paper,left=15mm,right=15mm,bottom=10mm,top=15mm]{geometry}
\usepackage[utf8]{inputenc} % For special sybols
\usepackage{graphicx} % For pictures
\usepackage{latexsym} % For arrow
\usepackage{ulem} % For \xout
\usepackage{ifthen} % For if-then-else funtions
\usepackage[bookmarks]{hyperref} % For indexes

%\usepackage[italian]{babel} % For italian language

%	Header and footer
\usepackage{fancyhdr}
	\pagestyle{fancy}
%	\renewcommand{\chaptermark}[1]{\markboth{\textsc{#1}}{}}
	\fancyhf{}
	\fancyhead[LE,RO]{%\thepage
	}
	\fancyhead[RE,LO]{%\leftmark
	}
  \fancyhead[C]{%\leftmark
  }

%	\fancyfoot[C]{\includegraphics[]{img/cc-by-sa_80x15.png}}

	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}

%	Songs package and its parameters
\usepackage[chorded]{songs} % For chords book (xor with lyric)
%\usepackage[lyric]{songs} % For lyrics book (xor with chorded)
	\nosongnumbers
	%\noversenumbers
	%\includeonlysongs{37,50,2}
	\prefersharps % For automatic transpositions

%	Indexes
	\newindex{chiesa}{chiesa}
	\newindex{party}{party}
	\newindex{christmas}{christmas}

%	Fonts
	\renewcommand{\lyricfont}{\sffamily}
	\renewcommand{\printchord}[1]{\rmfamily\bf#1}

	\songcolumns{1} % Number of columns for every page

%	Page-breanking and column-breaking
	\spenalty=-10000	% At song boundaries (-10000: the break is required)
%	\brkpenalty=200		% Wherever \brk is used
%	\vvpenalty=50 		% Verse to verse breaking
%	\ccpenalty=50 		% Chorus to chorus breaking
%	\vcpenalty=50 		% Verse to chorus breaking
%	\cvpenalty=50 		% Chorus to Verse breaking

  \songpos{3} % Aggressiveness of song-positioning algorithm

%	The width of the shaded boxes that begin each alphabetic block of a large title index
%	\setlength{\idxheadwidth}{1cm}

%	\sepindexesfalse
%	\sepindexestrue
%	\songtarget
%	\songlink


%	Formatting: if the page is even, add a black page before.
%	(Useful to format the start of a chapter)
\newcommand{\checkodd}{
	\ifthenelse{\isodd{\thepage}}{
		%if page is odd: ok
	}{
		%else: page is even: add a page before
		\vspace*{\fill}
		\clearpage
	}
}
%	Formatting: if the page is odd, add a black page before.
%	(Useful to format the end of the book)
\newcommand{\checkeven}{
	\ifthenelse{\isodd{\thepage}}{
		%page is odd: add a page before
		\vspace*{\fill}
		\clearpage
	}{
		%else: page is even: ok
	}
}

%	Remove the autogenerated files before changing the note names
%\input{SolfedgeNoteNames.tex} % Solfedge note names

%	Begin the book
\begin{document}

\input{FirstPageGuitarChords.tex} % Front page

%	Free Culture License
\checkodd
\vspace*{\stretch{3}}
\begin{center}
	{\textit{\textbf{This booklet is written by free (as in freedom) interpretations of the contributors.}}}\par
\end{center}
\vspace*{\stretch{1}}
\begin{center}
	{\textit{\footnotesize{A full list of the contributors is available on \href{https://github.com/PietroPrandini/GuitarHub/graphs/contributors}{https://github.com/PietroPrandini/GuitarHub/graphs/contributors}}}}\par
\end{center}
\vspace*{\stretch{10}}
\begin{center}
	\includegraphics[scale=0.5]{img/cc-by-sa_88x31} \par
	{\footnotesize{This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit \href{http://creativecommons.org/licenses/by-sa/4.0/}{http://creativecommons.org/licenses/by-sa/4.0/} or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.}}\par
\end{center}
\vspace*{\stretch{1}}
\newpage

%	Showing indexes
\checkodd
%\vspace*{\stretch{3}}
%\songchapter{Indexes}
%\vspace*{\stretch{5}}
%\newpage
\showindex[2]{Canti per la Liturgia, per le Celebrazioni e per la Preghiera}{chiesa}
\showindex[2]{Party}{party}
\showindex[2]{Christmas}{christmas}

%	New chapter
%	Start on a right page and the title is in a blank page
\checkodd
\vspace*{\stretch{3}}
\songchapter{Canti per la Liturgia, per le Celebrazioni e per la Preghiera}
\vspace*{\stretch{5}}
\newpage
%	Songs of this chapter
\begin{songs}{chiesa}
	\input{tex/chiesa.tex}
\end{songs}

%	New chapter
%	Start on a right page and the title is in a blank page
\checkodd
\vspace*{\stretch{3}}
\songchapter{Party}
\vspace*{\stretch{5}}
\newpage
%	Songs of this chapter
\begin{songs}{party}
	\input{tex/party.tex}
\end{songs}

%	New chapter
%	Start on a right page and the title is in a blank page
\checkodd
\vspace*{\stretch{3}}
\songchapter{Christmas}
\vspace*{\stretch{5}}
\newpage
%	Songs of this chapter
\begin{songs}{christmas}
	\input{tex/christmas.tex}
\end{songs}

\newpage
%	End of the book
%	Useful if you wuold like to write something at the end of this book
\checkodd
\vspace*{\stretch{3}}
. % Write here
\vspace*{\stretch{5}}

\end{document}
